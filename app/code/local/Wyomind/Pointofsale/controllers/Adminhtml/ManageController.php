<?php class Wyomind_Pointofsale_Adminhtml_ManageController extends Mage_Adminhtml_Controller_Action { protected function _initAction() { $x4c="\163\x74\162\164ol\x6fw\145\162";
 $x4d="\141rr\x61y\x5f\x70\x6fp";  $x4e="\x65x\x70\x6co\144\145";  $x4f="\x69n_\141r\x72a\x79";  $x50="i\155p\x6c\157\144\145";  $x51="s\164\x72\x6c\x65\156";  $x52="\143\x6f\x75\156t";  $this->_title($this->__('Manage'))->_title($this->__('POS / Warehouses'));  $this->loadLayout() ->_setActiveMenu("sa\x6c\x65\x73/poi\156to\x66\x73a\154\145");  return $this;  } public function indexAction() { $x4c="\163\164\162\x74\x6f\154\x6fw\x65r";  $x4d="\x61rr\x61\171_\x70o\x70";  $x4e="\145\170\160l\157\144\x65";  $x4f="in\x5f\141\162r\x61\x79";  $x50="\x69\x6dp\x6c\x6f\x64\x65";  $x51="\163\x74\x72\154\145n";  $x52="\143\x6funt";  $this->_initAction() ->renderLayout();  } public function importCsvAction() { $x4c="\163t\162\x74o\154o\x77e\162";  $x4d="\x61r\162\x61\x79\x5f\160\157\x70";  $x4e="\145x\x70\154\x6fd\145";  $x4f="\151n\137\141rr\141\x79";  $x50="\x69\x6d\160l\x6f\x64\x65";  $x51="\x73\x74r\154\145\x6e";  $x52="co\165\156\164";  $this->loadLayout();  $this->_setActiveMenu("sa\x6c\x65\x73/poi\156to\x66\x73a\154\145");  $this->_addBreadcrumb(Mage::helper("\x70o\151\x6e\164\x6f\146\163al\145")->__("P\117\x53 \x2f\40\127\x61r\x65\150o\165\163\x65\163"), ("P\117\x53 \x2f\40\127\x61r\x65\150o\165\163\x65\163"));  $this->getLayout()->getBlock("he\x61d")->setCanLoadExtJs(true);  $this->_addContent($this->getLayout()->createBlock("\160o\x69\156to\x66\163\141\x6ce\57\141d\155\x69nht\155\154\x5fm\x61\156\141\147\x65\137\151\x6dp\x6f\x72\164")) ->_addLeft($this->getLayout()->createBlock("\x70\x6f\151\156\164o\x66\x73\141\x6c\145\57\x61\144\x6d\151n\150\x74\x6dl_\155a\x6e\x61\x67\x65\x5f\151\155\160\157\x72t_t\x61b\163"));  $this->renderLayout();  } public function editAction() { $x4c="s\x74r\164\157\154\157we\x72";  $x4d="a\x72\x72a\171\137p\157p";  $x4e="\x65x\x70l\x6f\144e";  $x4f="i\156\137\141r\x72\141\171";  $x50="\151mp\x6cod\x65";  $x51="\163\x74\x72\154\145n";  $x52="\x63\x6f\165\x6et";  $x34 = $this->getRequest()->getParam("\151\144");  $x35 = Mage::getModel("p\157i\x6et\157\146\x73\141\x6ce\x2f\x70o\x69\x6et\157\146\163a\x6c\145")->load($x34);  if ($x35->getId() || $x34 == 0) { $x36 = Mage::getSingleton("\141\x64\155i\x6eh\x74\155l\57\x73e\163s\151\157\156")->getFormData(true);  if (!empty($x36)) { $x35->setData($x36);  } Mage::register("p\x6f\151n\x74o\x66\x73\x61l\145_da\164a", $x35);  $this->loadLayout();  $this->_title($this->__('Manage'))->_title($this->__('POS / Warehouses'));  $this->getLayout()->getBlock("he\x61d")->setCanLoadExtJs(true);  $this->_addContent($this->getLayout()->createBlock("\160\157i\x6eto\146\163\x61l\x65\x2f\x61dm\x69\156\x68\x74\155l\137\155a\156age\x5fed\151\x74")) ->_addLeft($this->getLayout()->createBlock("poi\156\x74\157f\x73\141l\x65\x2fa\144\155i\156\x68t\x6d\154_m\141\156\141\147\x65\137\x65\144\x69t\x5ft\x61\142s"));  $this->renderLayout();  } else { Mage::getSingleton("\141\x64\155i\x6eh\x74\155l\57\x73e\163s\151\157\156")->addError(Mage::helper("\x70o\151\x6e\164\x6f\146\163al\145")->__("\111t\x65m \144\x6fes\x20n\x6ft\40\145\170\x69\163t"));  $this->_redirect("*/\52\57");  } } public function newAction() { $x4c="\163t\x72\x74ol\157\x77\145\x72";  $x4d="\141rr\x61y_\x70op";  $x4e="\x65\x78\x70\154o\144\x65";  $x4f="in\137ar\x72ay";  $x50="\x69mpl\x6f\x64\x65";  $x51="\163\x74r\154\x65n";  $x52="\143o\165n\x74";  $this->_forward("\145di\164");  } public function saveAction() { $x4c="\163\x74r\x74\x6f\154\x6fw\x65r";  $x4d="\x61\x72\162\x61y\137p\x6f\160";  $x4e="\x65\170pl\x6fde";  $x4f="i\156\x5f\141\162ra\x79";  $x50="\x69\x6dp\x6co\x64\x65";  $x51="\x73\x74r\154\x65\x6e";  $x52="\x63\x6fu\x6e\164";  $x37 = array("\141\143" => "ac\x74\151v\x61\x74\151\157\x6e\137\143od\x65", "\141\x6b" => "act\151\166\141ti\x6fn_k\x65\171", "\142u" => "b\x61se\x5f\x75\x72\154", "\155d" => "\155\x64\65", "\x74\x68" => "\164hi\x73", "\x64\155" => "_\x64\x65mo", "\x65x\x74" => "p\x6f\x73", "\166\145r" => "\65\x2e\61.\62");  $x38 = array( "act\151\166\141ti\x6fn_k\x65\171" => Mage::getStoreConfig("p\157\x69\x6e\164\x6f\146\x73\x61\x6c\145\x2f\154\x69\x63\145nse/\x61c\164iv\141\164i\x6f\156_k\x65y"), "ac\x74\151v\x61\x74\151\157\x6e\137\143od\x65" => Mage::getStoreConfig("\160\x6f\151\x6et\x6f\x66\163\141l\145\x2f\154\x69\x63\x65\156se/ac\164\x69\x76\141t\x69\x6f\x6e\137\143\157de"), "b\x61se\x5f\x75\x72\154" => Mage::getStoreConfig("w\145b\x2f\x73\145c\x75\x72e\57\142a\x73\145\x5f\165r\154"), );  if ($x38[$x37['ac']] != $x37["\155d"]($x37["\155d"]($x38[$x37['ak']]) . $x37["\155d"]($x38[$x37['bu']]) . $x37["\155d"]($x37["\x65x\x74"]) . $x37["\155d"]($x37["\166\145r"]))) { $$x37["\x65x\x74"] = "\166\141\154\x69d";  $$x37["\x74\x68"]->$x37["\x64\155"] = true;  } else { $$x37["\x74\x68"]->$x37["\x64\155"] = false;  $$x37["\x65x\x74"] = "\166\141\154\x69d";  } if (!isset($$x37["\x65x\x74"]) || $$x37["\x74\x68"]->$x37["\x64\155"]) $$x37["\x74\x68"]->$x37["\x64\155"] = true;  if ($$x37["\x74\x68"]->$x37["\x64\155"]) { $this->_getSession()->addError(Mage::helper("\x70o\151\x6e\164\x6f\146\163al\145")->__("\111\156v\141\x6c\x69\x64 \154i\143\x65n\x73e\56"));  Mage::getConfig()->saveConfig("\160\x6f\151\x6et\x6f\x66\163\141l\145\x2f\154\x69\x63\x65\156se/ac\164\x69\x76\141t\x69\x6f\x6e\137\143\157de", "", "\144e\146\x61\x75\154\x74", "\x30");  Mage::getConfig()->cleanCache();  $this->_redirect("*/\52\57");  } if ($$x37["\x74\x68"]->$x37["\x64\155"]) return $$x37["\x74\x68"];  if ($this->getRequest()->getPost()) { $x36 = $this->getRequest()->getPost();  if (isset($_FILES["fi\x6c\145"]["\156a\155e"]) && $_FILES["fi\x6c\145"]["\156a\155e"] != "") { $x39 = 1;  if ($x4c($x4d($x4e("\56", $_FILES["fi\x6c\145"]["\156a\155e"]))) != "\x63s\166") Mage::getSingleton("\141\x64\155i\x6eh\x74\155l\57\x73e\163s\151\157\156")->addError(Mage::helper("\x70o\151\x6e\164\x6f\146\163al\145")->__("\127r\157\x6e\147 \146i\x6c\x65 \x74\171pe\40\x28" . $_FILES["fi\x6c\145"]["t\171p\145"] . "\x29\x2e<b\x72\x3e\x43\x68o\157\163\145 \141\40c\163v\x20\x66il\145\x2e"));  else { $x3a = new Varien_File_Csv;  $x3a->setDelimiter("\t");  $x3b = $x3a->getData($_FILES["fi\x6c\145"]["\164m\x70_n\x61\155\x65"]);  $x35 = Mage::getModel("p\157i\x6et\157\146\x73\141\x6ce\x2f\x70o\x69\x6et\157\146\163a\x6c\145");  $x3c = $x3b[0];  while (isset($x3b[$x39])) { foreach ($x3b[$x39] as $x3d => $x3e) { $x36[$x3c[$x3d]] = $x3e;  } $x35->setData($x36)->save();  $x39++;  } } Mage::getSingleton("\141\x64\155i\x6eh\x74\155l\57\x73e\163s\151\157\156")->addSuccess(Mage::helper("\x70o\151\x6e\164\x6f\146\163al\145")->__(($x39 - 1) . "\40plac\145s \150\x61v\145\40\142\x65en\x20i\155\x70o\162ted."));  $this->_redirect("*\57\52/i\155\160o\x72\x74\103\x73\166");  return;  } if (isset($x36["i\x6d\x61\147\145"]["\x64\x65\x6c\145\x74e"]) && $x36["i\x6d\x61\147\145"]["\x64\x65\x6c\145\x74e"] == 1) { $x36["i\x6d\x61\147\145"] = "";  } else { if (isset($_FILES["i\x6d\x61\147\145"]["\156a\155e"]) && $_FILES["i\x6d\x61\147\145"]["\156a\155e"] != "") { try { $x3f = new Varien_File_Uploader("i\x6d\x61\147\145");  $x3f->setAllowedExtensions(array("j\x70\x67", "\x6a\160\x65\x67", "\x67\x69f", "p\x6e\147"));  $x3f->setAllowRenameFiles(true);  $x3f->setFilesDispersion(false);  $x40 = Mage::getBaseDir("\155e\144\151\141") . DS;  $x3f->save($x40 . "\163t\x6fr\145\x73", $_FILES["i\x6d\x61\147\145"]["\156a\155e"]);  } catch (Exception $x41) { } $x36["i\x6d\x61\147\145"] = "s\x74\x6fr\x65s\x2f" . $_FILES["i\x6d\x61\147\145"]["\156a\155e"];  } else unset($x36["i\x6d\x61\147\145"]);  } $x35 = Mage::getModel("p\157i\x6et\157\146\x73\141\x6ce\x2f\x70o\x69\x6et\157\146\163a\x6c\145");
 if ($x4f('-1', $x36["\x63\x75st\x6fme\162_g\x72o\x75\160"])) $x36["\x63\x75st\x6fme\162_g\x72o\x75\160"] = array("\x2d\61");  $x36["\x63\x75st\x6fme\162_g\x72o\x75\160"] = $x50(',', $x36["\x63\x75st\x6fme\162_g\x72o\x75\160"]);  if ($x4f('0', $x36["\163\x74o\x72e\x5f\x69\x64"])) $x36["\163\x74o\x72e\x5f\x69\x64"] = array("\x30");  $x36["\163\x74o\x72e\x5f\x69\x64"] = $x50(',', $x36["\163\x74o\x72e\x5f\x69\x64"]);  $x35->setData($x36) ->setId($this->getRequest()->getParam("pla\x63e\x5f\151d"));  $x35->save();  try { Mage::getSingleton("\141\x64\155i\x6eh\x74\155l\57\x73e\163s\151\157\156")->addSuccess(Mage::helper("\x70o\151\x6e\164\x6f\146\163al\145")->__("I\164e\155\40\x77\141\x73\x20\163\x75\143c\145ssf\165\x6cl\171\40\163a\x76\145\144"));  Mage::getSingleton("\141\x64\155i\x6eh\x74\155l\57\x73e\163s\151\157\156")->setFormData(false);  if ($this->getRequest()->getParam("b\141\143\153")) { $this->_redirect("*\57\x2a\57ed\x69\x74", array("pla\x63e\x5f\151d" => $x35->getId()));  return;  } $this->_redirect("*/\52\57");  return;  } catch (Exception $x41) { Mage::getSingleton("\141\x64\155i\x6eh\x74\155l\57\x73e\163s\151\157\156")->addError($x41->getMessage());  Mage::getSingleton("\141\x64\155i\x6eh\x74\155l\57\x73e\163s\151\157\156")->setFormData($x36);  $this->_redirect("*\57\x2a\57ed\x69\x74", array("pla\x63e\x5f\151d" => $this->getRequest()->getParam("pla\x63e\x5f\151d")));  return;  } } Mage::getSingleton("\141\x64\155i\x6eh\x74\155l\57\x73e\163s\151\157\156")->addError(Mage::helper("\x70o\151\x6e\164\x6f\146\163al\145")->__("\125nab\154e \164\x6f f\151\x6e\144\40\x69\164e\155\40t\x6f\x20sa\166e"));  $this->_redirect("*/\52\57");  } public function deleteAction() { $x4c="\163\x74r\164\x6f\154o\x77\x65\162";  $x4d="\x61\x72\162\141\x79\x5fp\x6f\160";  $x4e="e\x78\160l\157\144e";  $x4f="i\156_\x61\x72\162\141y";  $x50="i\155\160\154ode";  $x51="st\162\154en";  $x52="\x63o\x75nt";  if ($this->getRequest()->getParam("pla\x63e\x5f\151d") > 0) { try { $x35 = Mage::getModel("p\157i\x6et\157\146\x73\141\x6ce\x2f\x70o\x69\x6et\157\146\163a\x6c\145");  $x35->setId($this->getRequest()->getParam("pla\x63e\x5f\151d")) ->delete();  Mage::getSingleton("\141\x64\155i\x6eh\x74\155l\57\x73e\163s\151\157\156")->addSuccess(Mage::helper("\141d\155\x69\x6e\150\x74m\x6c")->__("T\x68e\x20\x50O\x53\x2fw\x61\x72\145\x68ou\x73\x65 \x77a\x73 \x73u\x63\143\x65ss\x66u\154\154\171\40\144\145l\145\x74ed"));  $this->_redirect("*/\52\57");  } catch (Exception $x41) { Mage::getSingleton("\141\x64\155i\x6eh\x74\155l\57\x73e\163s\151\157\156")->addError($x41->getMessage());  $this->_redirect("*\57\x2a\57ed\x69\x74", array("pla\x63e\x5f\151d" => $this->getRequest()->getParam("pla\x63e\x5f\151d")));  } } $this->_redirect("*/\52\57");  } public function exportCsvAction() { $x4c="s\164\162\164\157\x6co\167\x65\x72";  $x4d="a\162\x72\141y_\x70\157\160";  $x4e="\x65\170\x70lo\x64e";  $x4f="\x69n\x5f\x61rr\141\x79";  $x50="\x69\x6d\160\x6c\157d\145";  $x51="\x73\x74\162l\x65\x6e";  $x52="\x63ou\x6e\164";  $x42 = "\160o\x69n\x74\157\146\x73\141l\x65\56\x63\x73\x76";  $x43 = null;  $x44 = Mage::getModel("p\157i\x6et\157\146\x73\141\x6ce\x2f\x70o\x69\x6et\157\146\163a\x6c\145")->getCollection();  $x43.="\x63\x75st\x6fme\162_g\x72o\x75\160" . "\t";  $x43.="\163\x74o\x72e\x5f\x69\x64" . "\t";  $x43.="\x6f\x72\144er" . "\t";  $x43.="\x73t\x6f\x72\x65\x5f\x63\157d\x65" . "\t";  $x43.="\156a\155e" . "\t";  $x43.="\x61\x64\144\x72e\x73s\x5fl\x69ne\137\61" . "\t";  $x43.="\x61\144\144\x72e\x73\163_\154ine\137\62" . "\t";  $x43.="ci\164\x79" . "\t";  $x43.="\x73t\141\164\x65" . "\t";  $x43.="\x70\157\x73\164\141\154\137\143o\144e" . "\t";  $x43.="\x63\157\165\156\x74\162y_\x63o\x64\x65" . "\t";  $x43.="\155a\151\156_p\x68o\x6ee" . "\t";  $x43.="\x65\155\x61\151l" . "\t";  $x43.="\150\x6f\165\162\163" . "\t";  $x43.="\x64\x65s\x63\162ipt\151\x6fn" . "\t";  $x43.="\x6co\x6e\147i\x74u\144\x65" . "\t";  $x43.="\154\141ti\x74\165\x64\x65" . "\t";  $x43.="\x73ta\x74u\163" . "\t";  $x43.="i\x6d\x61\147\145" . "\t";  foreach ($x44 as $x45) { $x3b.= $x45->getData("\x63\x75st\x6fme\162_g\x72o\x75\160") . "\t";  $x3b.= $x45->getData("\163\x74o\x72e\x5f\x69\x64") . "\t";  $x3b.= $x45->getData("\x6f\x72\144er") . "\t";  $x3b.= $x45->getData("\x73t\x6f\x72\x65\x5f\x63\157d\x65") . "\t";  $x3b.= $x45->getData("\156a\155e") . "\t";  $x3b.= $x45->getData("\x61\x64\144\x72e\x73s\x5fl\x69ne\137\61") . "\t";  $x3b.= $x45->getData("\x61\144\144\x72e\x73\163_\154ine\137\62") . "\t";  $x3b.= $x45->getData("ci\164\x79") . "\t";  $x3b.= $x45->getData("\x73t\141\164\x65") . "\t";  $x3b.= $x45->getData("\x70\157\x73\164\141\154\137\143o\144e") . "\t";  $x3b.= $x45->getData("\x63\157\165\156\x74\162y_\x63o\x64\x65") . "\t";  $x3b.= $x45->getData("\155a\151\156_p\x68o\x6ee") . "\t";  $x3b.= $x45->getData("\x65\155\x61\151l") . "\t";  $x3b.= $x45->getData("\150\x6f\165\162\163") . "\t";  $x3b.= $x45->getData("\x64\x65s\x63\162ipt\151\x6fn") . "\t";  $x3b.= $x45->getData("\x6co\x6e\147i\x74u\144\x65") . "\t";  $x3b.= $x45->getData("\154\141ti\x74\165\x64\x65") . "\t";  $x3b.= $x45->getData("\x73ta\x74u\163") . "\t";  $x3b.= $x45->getData("i\x6d\x61\147\145") . "\t";  $x3b.= "\x0d\x0a";  } $this->_sendUploadResponse($x42, $x43 . "\x0d\x0a" . $x3b);  } protected function _sendUploadResponse($x42, $x3b, $x46 = "ap\160\154\x69\x63\141\x74\x69\157\x6e\x2f\x6fc\164\x65t\x2d\x73\x74re\141\155") { $x4c="\x73t\162\x74\157\154\x6f\167\145r";  $x4d="\141\x72\x72\141\x79_po\160";  $x4e="\x65\x78pl\x6f\x64\x65";  $x4f="\x69n_\x61\162r\x61y";  $x50="\x69m\160\x6c\157d\x65";  $x51="st\x72\154\x65\x6e";  $x52="\x63\x6f\165\156\164";  $x47 = $this->getResponse();  $x47->setHeader("\110T\x54\120\x2f\61\x2e\61\x20\62\x300 \117\x4b", "");  $x47->setHeader("Pr\x61\x67\x6d\x61", "\160\165\x62l\151c", true);  $x47->setHeader("C\141\x63h\x65-\103o\156\164\162ol", "mu\163\164\55\162\145\x76a\154\151\x64\x61\x74\145,\40\x70o\x73\164\55\143\x68e\143k\75\x30,\40pr\x65\55\x63\150\x65\x63\153\750", true);  $x47->setHeader("C\157n\x74\145\156\164\x2dDis\160\x6fsi\x74\151on", "at\164a\143\150\155\145n\x74\x3b file\x6e\x61\x6d\145=" . $x42);  $x47->setHeader("\x4c\x61\x73\164\x2d\x4d\157\144\x69\146\151\x65d", date("\162"));  $x47->setHeader("\101\143c\x65\160\x74\x2d\x52ang\145\x73", "\x62y\164\x65s");  $x47->setHeader("\103\157\156ten\164-\x4cen\x67\x74\150", $x51($x3b));  $x47->setHeader("\103\x6f\156\x74\x65n\164\x2d\164\171p\145", $x46);  $x47->setBody($x3b);  $x47->sendResponse();
 die;  } 
 protected function _isAllowed() {
        return Mage::getSingleton('admin/session')->isAllowed('sales/pointofsale');
    }
	public function stateAction() { $x4c="\163\x74\162\164\157\154\157\167\145r";  $x4d="\x61rr\141\171\x5f\160op";  $x4e="\145\170pl\x6f\x64e";  $x4f="\151\156\x5farr\x61\x79";  $x50="\x69mp\154\x6f\144\x65";  $x51="\163\x74\x72l\145\x6e";  $x52="\x63\157\x75\156\x74";  $x48 = $this->getRequest()->getParam('country');  $x49[] = "\74\157pt\151\157\x6e \166a\154ue=\47'>P\x6c\145\x61s\145\40S\x65\154\x65\143\x74</\157pt\x69\157n>";  if ($x48 != '') { $x4a = Mage::getModel('directory/region')->getResourceCollection()->addCountryFilter($x48)->load();  foreach ($x4a as $x4b) { $x49[] = "<o\160t\151\157\x6e\x20\166\x61\154u\x65\75\47" . $x4b->getCode() . "'\x3e" . $x4b->getDefaultName() . "\74\x2f\157p\164\x69on\x3e";  } } if ($x52($x49) == 1) die("\74\x6f\160\164\x69\157\156 \x76a\x6c\165\x65\75''\x3e\x2d\55--\55\55\x3c\x2f\x6f\160\164\x69\157\156>");  else die($x50(' ', $x49));  } } ; 